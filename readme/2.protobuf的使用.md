# 说明
* 项目使用protobuf作为客户端与服务端通信
* 由于客户端使用typescript，服务器使用golang,所以需要将proto转换成两种不同语言的数据结构

# 客户端的proto
* cd到client目录中执行：`yarn init`
* 安装protobufjs包:`yarn add protobufjs`，此时项目node_module中会下载protobufjs
* 编译proto生成typescript的流程
  >step1:先将proto生成javascript:`pbjs -t static-module -w commonjs -o /proto.js /*.proto`
  >step2:再将javascript生成typescript:`pbts -o /proto.ts /proto.js`
* paackage.json中添加编译命令：
    ```
    "scripts": {
        "build-pb-js": "pbjs --dependency protobufjs/minimal.js --target static-module --wrap commonjs --out assets/script/pb/proto.js ../proto/*.proto",
        "build-pb-ts": "pbts --main --out assets/script/pb/proto.d.ts assets/script/pb/proto.js"
    }
    ```
* 在client目录下使用命令：`yarn run build-pb-js`，`yarn run build-pb-ts`

# 参考：
* cocos如何使用protobuf:https://docs.cocos.com/creator/3.0/manual/zh/scripting/modules/example.html?h=protobuf
* protobufjs的github:https://github.com/protobufjs/protobuf.js
